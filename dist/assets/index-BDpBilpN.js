import{ai as e,aj as n,C as t,a1 as o,ak as i,al as s,a0 as r,am as a,k as d,D as l,ag as c,G as m}from"./three-BZ6b_Rf7.js";import{G as g,O as p}from"./vendor-Cx0zTeyC.js";if(function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}(),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".menu-tab"),n=document.getElementById("loading-container"),t=document.getElementById("loading-text");e.forEach((o=>{o.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),o.classList.add("active");const i=o.dataset.fractal;t.textContent=`Loading ${i}...`,n.style.display="block";const s=new CustomEvent("fractalChange",{detail:{type:i}});window.dispatchEvent(s)}))}))})),console.log("main.js starting execution..."),void 0===e)throw console.error("THREE is not defined in main.js!"),new Error("THREE is not defined");console.log("THREE is defined in main.js, proceeding with initialization...");const f=new n;f.background=new t(0);const u=new o(75,window.innerWidth/window.innerHeight,.1,1e3);u.position.z=5;const y=new i({antialias:!1,powerPreference:"high-performance",precision:"mediump"});y.setSize(window.innerWidth,window.innerHeight),y.setPixelRatio(Math.min(window.devicePixelRatio,2)),y.shadowMap.enabled=!1,document.body.appendChild(y.domElement);const w=new s;w.onProgress=(e,n,t)=>{const o=n/t*100,i=document.getElementById("loading-progress"),s=document.getElementById("loading-text");i.style.width=o+"%",s.textContent=Math.round(o)+"%"},w.onLoad=()=>{document.getElementById("loading-container").style.display="none"},w.onError=e=>{console.error(`Error loading: ${e}`);const n=document.getElementById("loading-text");n.textContent="Error loading model!",n.style.color="#ff4444"};const h=new g(w),E=new r;f.add(E);let b=null,x=0,v="menger";const L=new a(16777215,2);f.add(L);const k=new d(4286945,4,8);k.position.set(0,0,0),f.add(k);const C=new l(16777215,3);C.position.set(3,3,3),f.add(C);const M=new l(4286945,2.5);M.position.set(-3,-2,2),f.add(M);const z=new l(16777215,2);z.position.set(0,0,-3),f.add(z);const I=new d(16777215,5,10);I.position.set(0,0,0),f.add(I),I.visible=!1;const P=new l(4286945,2);P.position.set(0,5,0),f.add(P),P.visible=!1;const S=new p(u,y.domElement);function B(e){if("sierpinski"===e){const e=3.32;S.minDistance=1.5*e,S.maxDistance=15}else{const e=2;S.minDistance=e*Math.sqrt(3)/2+.1,S.maxDistance=10}S.target.set(0,0,0),S.update()}function j(e){!function(){for(;E.children.length>0;){const e=E.children[0];e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((e=>e.dispose())):e.material.dispose()),E.remove(e)}}(),v=e,B(e),function(e){"sierpinski"===e?(I.visible=!0,P.visible=!0,k.visible=!1,C.visible=!1,M.visible=!1,z.visible=!1,L.intensity=1):(k.visible=!0,C.visible=!0,M.visible=!0,z.visible=!0,I.visible=!1,P.visible=!1,L.intensity=1.5)}(e);const n=document.getElementById("loading-progress"),t=document.getElementById("loading-text"),o=document.getElementById("loading-container");n.style.width="0%",t.textContent="0%",t.style.color="#ffffff",o.style.display="block";const i="sierpinski"===e?"sierpinski.glb":`${e}_sponge.glb`;w.onStart=(e,n,t)=>{console.log(`Started loading: ${e}`)},w.onProgress=(e,o,i)=>{const s=o/i*100;console.log(`Loading progress: ${s.toFixed(2)}%`),n.style.width=s+"%",t.textContent=Math.round(s)+"%"},w.onLoad=()=>{console.log("Loading complete!"),o.style.display="none"},w.onError=e=>{console.error(`Error loading: ${e}`),t.textContent="Error loading model!",t.style.color="#ff4444"},h.load(i,(n=>{console.log(`Model loaded successfully: ${i}`);const t=n.scene;b=t;const s=(new c).setFromObject(t);let a;x=Math.max(s.max.x-s.min.x,s.max.y-s.min.y,s.max.z-s.min.z),"sierpinski"===e?(a=function(e){const n=new r,t=.83*e,o=-.664;return[{x:-1.66,y:o,z:-1.66},{x:t/2,y:o,z:-1.66},{x:t/2,y:o,z:t/2},{x:-1.66,y:o,z:t/2},{x:0,y:t+o,z:0}].forEach((e=>{const t=b.clone();if(t.position.set(e.x,e.y,e.z),"sierpinski"===v){const e=new d(16777215,2,3);e.position.set(0,0,0),t.add(e)}n.add(t)})),n}(4),u.position.set(8,8,8)):(a=function(e,n){const t=new r,o=new m({color:4286945,metalness:.7,roughness:.2,transparent:!0,opacity:1,flatShading:!0});return function e(n,i,s,r,a){if(0===a){const e=b.clone();return e.scale.setScalar(r/x),e.position.set(n,i,s),e.traverse((e=>{e.isMesh&&(e.material=o)})),void t.add(e)}const d=r/3;for(let t=-1;t<=1;t++)for(let o=-1;o<=1;o++)for(let r=-1;r<=1;r++)Math.abs(t)+Math.abs(o)+Math.abs(r)<=1||e(n+t*d,i+o*d,s+r*d,d,a-1)}(0,0,0,n,e),t}(1,2),u.position.set(0,0,5)),E.add(a),S.target.set(0,0,0),S.update(),o.style.display="none"}),(e=>{if(e.lengthComputable){const o=e.loaded/e.total*100;console.log(`Download progress: ${o.toFixed(2)}%`),n.style.width=o+"%",t.textContent=Math.round(o)+"%"}}),(e=>{console.error("An error happened:",e),t.textContent="Error loading model!",t.style.color="#ff4444"}))}S.enableDamping=!0,S.dampingFactor=.1,S.rotateSpeed=.7,S.zoomSpeed=.7,S.enablePan=!1,window.addEventListener("fractalChange",(e=>{j(e.detail.type)})),B("menger");let D=0;!function e(n){requestAnimationFrame(e);const t=n-D;D=n,t>16&&"sierpinski"!==v&&(E.rotation.x+=.001,E.rotation.y+=.001),S.enabled&&S.update(),y.render(f,u)}(performance.now()),window.addEventListener("resize",(()=>{const e=window.innerWidth,n=window.innerHeight;u.aspect=e/n,u.updateProjectionMatrix(),y.setSize(e,n)}));
//# sourceMappingURL=index-BDpBilpN.js.map
