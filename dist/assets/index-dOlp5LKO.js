import{ai as e,aj as t,C as n,a1 as o,ak as i,al as s,a0 as a,am as r,k as d,D as l,ag as c,G as m}from"./three-BZ6b_Rf7.js";import{G as g,O as p}from"./vendor-Cx0zTeyC.js";if(function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".menu-tab"),t=document.getElementById("loading-container"),n=document.getElementById("loading-text");e.forEach((o=>{o.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),o.classList.add("active");const i=o.dataset.fractal;n.textContent=`Loading ${i}...`,t.style.display="block";const s=new CustomEvent("fractalChange",{detail:{type:i}});window.dispatchEvent(s)}))}))})),console.log("main.js starting execution..."),void 0===e)throw console.error("THREE is not defined in main.js!"),new Error("THREE is not defined");console.log("THREE is defined in main.js, proceeding with initialization...");const u=new t;u.background=new n(0);const y=new o(75,window.innerWidth/window.innerHeight,.1,1e3);y.position.z=5;const f=new i({antialias:!1,powerPreference:"high-performance",precision:"mediump"});f.setSize(window.innerWidth,window.innerHeight),f.setPixelRatio(Math.min(window.devicePixelRatio,2)),f.shadowMap.enabled=!1,document.body.appendChild(f.domElement);const w=new s;w.onProgress=(e,t,n)=>{const o=t/n*100,i=document.getElementById("loading-progress"),s=document.getElementById("loading-text");i.style.width=o+"%",s.textContent=Math.round(o)+"%"},w.onLoad=()=>{document.getElementById("loading-container").style.display="none"},w.onError=e=>{console.error(`Error loading: ${e}`);const t=document.getElementById("loading-text");t.textContent="Error loading model!",t.style.color="#ff4444"};const h=new g(w),E=new a;u.add(E);let b=null,v=0,x="menger";const k=new r(16777215,2);u.add(k);const z=new d(4286945,4,8);z.position.set(0,0,0),u.add(z);const I=new l(16777215,3);I.position.set(3,3,3),u.add(I);const M=new l(4286945,2.5);M.position.set(-3,-2,2),u.add(M);const B=new l(16777215,2);B.position.set(0,0,-3),u.add(B);const L=new d(16777215,5,10);L.position.set(0,0,0),u.add(L),L.visible=!1;const C=new l(4286945,2);C.position.set(0,5,0),u.add(C),C.visible=!1;const P=new p(y,f.domElement);function S(e){if("sierpinski"===e){const e=3.32;P.minDistance=1.5*e,P.maxDistance=15}else{const e=2;P.minDistance=e*Math.sqrt(3)/2+.1,P.maxDistance=10}P.target.set(0,0,0),P.update()}function j(e){!function(){for(;E.children.length>0;){const e=E.children[0];e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((e=>e.dispose())):e.material.dispose()),E.remove(e)}}(),x=e,S(e),"sierpinski"===e?(L.visible=!0,C.visible=!0,z.visible=!1,I.visible=!1,M.visible=!1,B.visible=!1,k.intensity=1):(z.visible=!0,I.visible=!0,M.visible=!0,B.visible=!0,L.visible=!1,C.visible=!1,k.intensity=1.5);const t=document.getElementById("loading-progress"),n=document.getElementById("loading-text");t.style.width="0%",n.textContent="0%",document.getElementById("loading-container").style.display="block";const o="sierpinski"===e?"sierpinski.glb":`${e}_sponge.glb`;h.load(o,(t=>{const n=t.scene;b=n;const o=(new c).setFromObject(n);v=Math.max(o.max.x-o.min.x,o.max.y-o.min.y,o.max.z-o.min.z);const i=new m({color:4286945,metalness:.7,roughness:.2,transparent:!0,opacity:1,flatShading:!0});if(n.traverse((e=>{e.isMesh&&(e.material=i)})),"sierpinski"===e){const e=function(e){const t=new a,n=.83*e,o=-.664;return[{x:-1.66,y:o,z:-1.66},{x:n/2,y:o,z:-1.66},{x:n/2,y:o,z:n/2},{x:-1.66,y:o,z:n/2},{x:0,y:n+o,z:0}].forEach((e=>{const n=b.clone();if(n.position.set(e.x,e.y,e.z),"sierpinski"===x){const e=new d(16777215,2,3);e.position.set(0,0,0),n.add(e)}t.add(n)})),t}(4);E.add(e),y.position.set(8,8,8),P.target.set(0,0,0),P.update()}else{const e=function(e,t){const n=new a,o=new m({color:4286945,metalness:.7,roughness:.2,transparent:!0,opacity:1,flatShading:!0});return function e(t,i,s,a,r){if(0===r){const e=b.clone();return e.scale.setScalar(a/v),e.position.set(t,i,s),e.traverse((e=>{e.isMesh&&(e.material=o)})),void n.add(e)}const d=a/3;for(let n=-1;n<=1;n++)for(let o=-1;o<=1;o++)for(let a=-1;a<=1;a++)Math.abs(n)+Math.abs(o)+Math.abs(a)<=1||e(t+n*d,i+o*d,s+a*d,d,r-1)}(0,0,0,t,e),n}(1,2);E.add(e),y.position.set(0,0,5),P.target.set(0,0,0),P.update()}document.getElementById("loading-container").style.display="none"}),(e=>{const t=e.loaded/e.total*100,n=document.getElementById("loading-progress"),o=document.getElementById("loading-text");n.style.width=t+"%",o.textContent=Math.round(t)+"%"}),(e=>{console.error("An error happened:",e);const t=document.getElementById("loading-text");t.textContent="Error loading model!",t.style.color="#ff4444"}))}P.enableDamping=!0,P.dampingFactor=.1,P.rotateSpeed=.7,P.zoomSpeed=.7,P.enablePan=!1,window.addEventListener("fractalChange",(e=>{j(e.detail.type)})),S("menger");let D=0;!function e(t){requestAnimationFrame(e);const n=t-D;D=t,n>16&&"sierpinski"!==x&&(E.rotation.x+=.001,E.rotation.y+=.001),P.enabled&&P.update(),f.render(u,y)}(performance.now()),window.addEventListener("resize",(()=>{const e=window.innerWidth,t=window.innerHeight;y.aspect=e/t,y.updateProjectionMatrix(),f.setSize(e,t)}));
//# sourceMappingURL=index-dOlp5LKO.js.map
